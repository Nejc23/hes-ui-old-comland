<div class="pt-1 h-100">
    <form [formGroup]="form">
      <div class="d-flex mb-2">
        <h3 i18n class="mb-0 text-truncate" container="body" placement="bottom" [openDelay]="500" [ngbTooltip]="getFilterTitle()">{{getFilterTitle()}}</h3>
        <button i18n type="button" class="close ml-auto" (click)="doToggleFilter()" aria-label="Close">
          <i class="far fa-times"></i>
        </button>
      </div>
      <div class="filter-scroll">
        <fieldset [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll">
          <app-input-tag label="Status" [property]="statusesProperty" [form]="form"
            [autocompleteItemsAsObjects]="meterUnitStatuses$ | async" [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll" i18n-label>
          </app-input-tag>

          <div class="form-row text-danger" *ngIf="!form.valid">
            <div class="col-6"></div>
            <div class="col-6"><i class="far fa-info-circle"></i><span class="small">{{errorValidatorReadStatusComponents()}}</span></div>
          </div>
          <app-select-input label="Vendor" [form]="form" [property]="vendorProperty" [selectOptions]="meterUnitVendors$ | async" [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll" i18n-label>
          </app-select-input>

          <app-input-tag label="Firmware" [allowCustomValues]="true" [property]="firmwareProperty" [form]="form" [autocompleteItemsAsObjects]="firmware$ | async" [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll" i18n-label>
          </app-input-tag>

          <app-input-switch label="Show only Meter units with information of child (MBus)" [form]="form" [property]="showOnlyMeterUnitsWithMBusInfoProperty" i18n-label></app-input-switch>

          <app-input-tag label="Disconnector state" [property]="breakerStateProperty" [form]="form" [autocompleteItemsAsObjects]="disconnectorState$ | async" [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll" i18n-label>
          </app-input-tag>

          <app-input-tag label="CII state" [property]="ciiStateProperty" [form]="form" [autocompleteItemsAsObjects]="ciiState$ | async" [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll" i18n-label>
          </app-input-tag>

          <app-input-tag label="Breaker state" [property]="breakerStateProperty" [form]="form" [autocompleteItemsAsObjects]="disconnectorState$ | async" [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll" i18n-label>
          </app-input-tag>

          <app-input-tag label="Tag" [property]="tagsProperty" [form]="form" [autocompleteItemsAsObjects]="meterUnitTags$ | async" [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll" i18n-label>
          </app-input-tag>

          <app-input-switch label="Show deleted Meter Units" [form]="form" [property]="showDeletedMeterUnitsProperty" i18n-label></app-input-switch>
          <app-input-switch label="Show Meter Units without template" [form]="form" [property]="showMeterUnitsWithoutTemplateProperty" i18n-label></app-input-switch>
          <app-input-switch label="Show only image ready for activation" [form]="form" [property]="showOnlyImageReadyForActivationProperty" i18n-label></app-input-switch>

        </fieldset>

        <div class="form-group" > <!--</div>*ngIf="!gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll">      -->
          <button type="submit" class="btn btn-block btn-light" (click)="applyButtonClicked()">
            <span i18n>Apply Filters</span>
          </button>
        </div>
        <div class="form-group link">
          <strong><a class="text-primary" href="javascript:void(0);" (click)="clearButtonClicked()">
            <span i18n>Clear Filters</span></a>
          </strong>
        </div>
        <div class="form-group link">
          <strong><span class="text-secondary" i18n>Save Filter Set</span></strong>
          <hr>
        </div>
        <div class="form-group link">
          <strong><span class="small" i18n>Saved Filter Sets</span></strong>
        </div>
      </div>
    </form>
  </div>
