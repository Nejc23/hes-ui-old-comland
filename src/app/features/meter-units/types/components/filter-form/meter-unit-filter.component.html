<div class="pt-1 h-100">
  <form [formGroup]="form">
    <div class="d-flex mb-2">
      <h3 [openDelay]="500" class="mb-0 text-truncate" container="body" ngbTooltip="{{ 'FILTER.TITLE' | translate }}"
          placement="bottom">{{ 'FILTER.TITLE' | translate }}</h3>
      <button (click)="doToggleFilter()" aria-label="Close" class="btn-close ms-auto" type="button">
      </button>
    </div>
    <div class="filter-scroll">
      <fieldset
        [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll">
        <app-input-tag (valueChanged)="applyFilter()" [autocompleteItemsAsObjects]="meterUnitStatuses$ | async"
                       [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll"
                       [form]="form"
                       [property]="statesProperty"
                       label="State">
        </app-input-tag>

        <app-input-tag (valueChanged)="applyFilter()" [autocompleteItemsAsObjects]="protocolTypes$ | async"
                       [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll"
                       [form]="form"
                       [property]="protocolProperty"
                       label="Protocol">
        </app-input-tag>

        <div *ngIf="!form.valid" class="form-row text-danger">
          <div class="col-6"></div>
          <div class="col-6"><i class="far fa-info-circle"></i><span
            class="small">{{errorValidatorReadStatusComponents()}}</span></div>
        </div>
        <app-input-tag (selectedValueChanged)="applyFilter()" (valueChanged)="applyFilter()"
                       [autocompleteItemsAsObjects]="meterUnitVendors$ | async"
                       [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll"
                       [form]="form"
                       [property]="vendorsProperty"
                       label="Vendor">
        </app-input-tag>

        <app-input-tag (valueChanged)="applyFilter()" [autocompleteItemsAsObjects]="deviceMediums$ | async"
                       [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll"
                       [form]="form"
                       [property]="mediumProperty"
                       label="Medium">
        </app-input-tag>

        <app-input-tag (valueChanged)="applyFilter()" [allowCustomValues]="true"
                       [autocompleteItemsAsObjects]="firmware$ | async"
                       [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll"
                       [form]="form"
                       [property]="firmwareProperty"
                       label="Firmware">
        </app-input-tag>

        <app-input-tag (valueChanged)="applyFilter()" [autocompleteItemsAsObjects]="disconnectorState$ | async"
                       [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll"
                       [form]="form"
                       [property]="breakerStateProperty"
                       label="Disconnector state">
        </app-input-tag>

        <app-input-tag (valueChanged)="applyFilter()" [autocompleteItemsAsObjects]="ciiState$ | async"
                       [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll"
                       [form]="form"
                       [property]="ciiStateProperty"
                       label="CII state">
        </app-input-tag>

        <app-input-tag (valueChanged)="applyFilter()" [autocompleteItemsAsObjects]="showOptionFilter$"
                       [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll"
                       [form]="form"
                       [property]="showOptionFilterProperty"
                       label="Show">
        </app-input-tag>

        <app-input-tag [autocompleteItemsAsObjects]="meterUnitTags$ | async"
                       [disabled]="gridSettingsSessionStoreService.getGridSettings(this.sessionNameForGridState).isSelectedAll"
                       [form]="form"
                       [property]="tagsProperty"
                       label="Tag">
        </app-input-tag>

      </fieldset>

      <div class="mb-3 link mt-2">
        <strong><a (click)="clearButtonClicked()" class="text-primary" href="javascript:void(0);">
          <span>{{ 'FILTER.CLEAR-FILTERS' | translate }}</span></a>
        </strong>
      </div>
    </div>
  </form>
</div>
