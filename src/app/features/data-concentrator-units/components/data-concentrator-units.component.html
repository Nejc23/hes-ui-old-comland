<!-- header -->

<!--<div class="d-flex align-items-center mb-3">
  <app-header-title [headerTitle]="headerTitle"></app-header-title>
  <button [appHideIfAuthorizedReadonly]="formFunctionality" class="btn btn-primary btn-round" (click)="addDcu()" *ngIf="!noData">
    <i class="far fa-plus"></i>
  </button>
  <app-breadcrumb class="ml-auto"></app-breadcrumb>
</div>-->


<div class="row">
  <div class="col-2 filter-shadow" *ngIf="!hideFilter">
    <app-dc-filter (filterChange)="reloadGrid(); deselectAll();" (toggleFilter)="toggleFilter()"></app-dc-filter>
  </div>

  <div [ngClass]="{'col-10': !hideFilter, 'col-12': hideFilter}">
    <!-- <button id="filterToggle" class="btn btn-round position-absolute shadow" (click)="clickShowHideFilter()" [ngbTooltip]="hidwShowFilters">
      <i class='far'
         [ngClass]="{'fa-compress-alt': !hideFilter, 'fa-expand-alt': hideFilter}"></i>
    </button> -->

    <!-- row total items, selected filter name -->
    <div *ngIf="!noData">
      <div class="mb-2">
        <div class="grid-actions">
          <app-action-form
            [gridColumns]="columns"
            [filtersInfo]="filtersInfo"
            [isFilterOpened]="!hideFilter"
            [selectedCount]="getSelectedCount()"
            (searchChange)=searchData($event)
            (refresh)="refreshGrid()"
            (addDcu)="addDcu()"
            (toggleFilter)="toggleFilter()">
            <button [appHideIfAuthorizedReadonly]="formFunctionality" class="btn btn-primary ml-3 mr-2" (click)="addDcu()" *ngIf="getSelectedCount() === 0">
              <i class="far fa-plus"></i> <span i18n>Add</span>
            </button>
          </app-action-form>
        </div>
      </div>
<!--
      <div class="d-flex align-items-center p-2 grid-actions" *ngIf="!selectedAtLeastOneRowOnGrid">-->
        <!--<small class="text-secondary">
          {{totalCount}} <span i18n>items</span> &middot; {{filters}}
          <a class="ml-3" *ngIf="isFilterSet()" href="javascript:void(0);" (click)="clearFilter()"><span i18n>Clear all</span></a>
        </small>-->
    <!--    <button [appHideIfAuthorizedReadonly]="formFunctionality" class="btn btn-primary" (click)="addDcu()" *ngIf="!noData">
          <i class="far fa-plus"></i> <span i18n>Add</span>
        </button>

      </div>

      <div class="d-flex align-items-center p-2 bg-primary" *ngIf="selectedAtLeastOneRowOnGrid">

      </div>
    -->
      <!-- ag-grid -->
      <ag-grid-angular class="ag-theme-epoint" style="width: 100%; height: calc(100% - 25px);" #agGrid
        [domLayout]=agGridSettings.domLayout suppressSizeToFit=agGridSettings.suppressSizeToFit [modules]="modules"
        [icons]="icons" [pagination]=agGridSettings.pagination [paginationPageSize]=agGridSettings.paginationPageSize
        [multiSortKey]=agGridSettings.multiSortKey [cacheOverflowSize]="agGridSettings.cacheOverflowSize"
        [maxConcurrentDatasourceRequests]="agGridSettings.maxConcurrentDatasourceRequests"
        [frameworkComponents]="frameworkComponents" [cacheBlockSize]=agGridSettings.paginationPageSize
        [maxBlocksInCache]="1" [gridOptions]="gridOptions" [columnDefs]="columns"
        [suppressRowClickSelection]=agGridSettings.suppressRowClickSelection [rowSelection]=agGridSettings.rowSelection
        [sideBar]="sideBar" [overlayNoRowsTemplate]="overlayNoRowsTemplate"
        [overlayLoadingTemplate]="overlayLoadingTemplate" (selectionChanged)="onSelectionChanged()"
        (gridReady)="onGridReady($event)" (columnVisible)="onColumnVisible($event)"
        (paginationChanged)="onPaginationChange($event)"
        (rowSelected)="onRowSelect($event)" (firstDataRendered)="onFirstDataRendered($event)"
        [localeText]="localeText">
      </ag-grid-angular>

      <div class="ag-paging-panel-selection">
        <div class="p-2 ml-1" *ngIf="getSelectedCount() > 0">
          <div class="mr-3" *ngIf="!checkSelectedAll() && getSelectedCount() > 0">
            <small class="link">{{getSelectedCount()}} <strong><span i18n>items selected</span> &middot;
              <a class="text-primary" href="javascript:void(0);" (click)="selectAll()"><span i18n>Select all</span>
                    ({{totalCount}})</a></strong></small>
          </div>

          <div class="mr-3" *ngIf="checkSelectedAll()">
            <small class="link"><strong><span i18n>All ({{getTotalCountWithoutExcluded()}}) items selected</span> &middot;
              <a class="text-primary" href="javascript:void(0);" (click)="deselectAll()"><span i18n>Clear
                      selected</span></a></strong></small>
          </div>
        </div>
      </div>

    </div>

    <div *ngIf="noData" class="d-flex flex-column justify-content-center align-items-center" style="height: 30vh;">
      <i class="far fa-empty-set fa-5x text-secondary mb-4"></i>
      <h3 class="mb-3" i18n>You have no Data Concentrator Units yet!</h3>
      <button type="button" class="btn btn-lg btn-primary" (click)="addDcu()"><i class="far fa-plus"></i><span i18n>Add First</span></button>
    </div>
  </div>
</div>

<ng-template #hideShowFilter><span i18n>Show/hide filters</span></ng-template>
